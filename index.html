<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Y8 Style Paper Plane</title>
    <style>
        body { margin: 0; overflow: hidden; background: #4facfe; font-family: 'Arial', sans-serif; }
        #game-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; }
        
        /* 구름 배경 (Parallax 효과) */
        .cloud {
            position: absolute; background: white; border-radius: 50px; opacity: 0.6;
            filter: blur(5px); pointer-events: none;
        }

        #plane {
            position: absolute; width: 50px; height: 20px;
            left: 150px; top: 50%;
            background: white;
            clip-path: polygon(0% 50%, 100% 0%, 85% 50%, 100% 100%, 0% 60%);
            box-shadow: -5px 5px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }

        /* 비행기 뒤 잔상(Trail) */
        .trail {
            position: absolute; width: 4px; height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%; pointer-events: none;
        }

        #ui {
            position: absolute; top: 20px; left: 20px; color: white;
            z-index: 200; text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="ui">
        <div id="score">Distance: 0m</div>
        <div id="speed-indicator">Speed: 0km/h</div>
    </div>
    <div id="plane"></div>
</div>

<script>
    const container = document.getElementById('game-container');
    const plane = document.getElementById('plane');
    const scoreEl = document.getElementById('score');
    const speedEl = document.getElementById('speed-indicator');

    let gameActive = true;
    let planeY = window.innerHeight / 2;
    let velocityY = 0;
    let rotation = 0;
    let speed = 5; // 전진 속도
    let distance = 0;

    // 1. 구름 생성 (배경 깊이감)
    function createCloud() {
        const cloud = document.createElement('div');
        cloud.className = 'cloud';
        const size = Math.random() * 100 + 50;
        cloud.style.width = size + 'px';
        cloud.style.height = (size * 0.6) + 'px';
        cloud.style.top = Math.random() * window.innerHeight + 'px';
        cloud.style.left = window.innerWidth + 'px';
        // 멀리 있는 구름은 느리게 움직이도록 속도 부여
        const cloudSpeed = Math.random() * 2 + 1;
        container.appendChild(cloud);

        const moveCloud = () => {
            if (!gameActive) return;
            const currentLeft = parseFloat(cloud.style.left);
            if (currentLeft < -200) {
                container.removeChild(cloud);
            } else {
                cloud.style.left = (currentLeft - cloudSpeed * (speed/5)) + 'px';
                requestAnimationFrame(moveCloud);
            }
        };
        moveCloud();
    }
    setInterval(createCloud, 2000);

    // 2. 비행기 잔상 효과
    function createTrail(x, y) {
        const trail = document.createElement('div');
        trail.className = 'trail';
        trail.style.left = x + 'px';
        trail.style.top = y + 'px';
        container.appendChild(trail);
        
        setTimeout(() => {
            trail.style.opacity = '0';
            setTimeout(() => container.removeChild(trail), 500);
        }, 100);
    }

    // 3. 메인 게임 루프
    function update() {
        if (!gameActive) return;

        // 물리 법칙: 각도가 위를 향하면 속도가 줄고, 아래를 향하면 빨라짐
        velocityY += 0.15; // 중력
        planeY += velocityY;
        
        // 회전 제어: 속도와 방향에 따라 부드럽게 회전
        rotation = velocityY * 4;
        plane.style.transform = `rotate(${rotation}deg)`;
        plane.style.top = planeY + 'px';

        // 전진 거리 계산
        distance += Math.floor(speed);
        scoreEl.innerText = `Distance: ${distance}m`;
        speedEl.innerText = `Speed: ${Math.floor(speed * 20)}km/h`;

        // 잔상 생성
        createTrail(150, planeY + 10);

        // 경계선 체크
        if (planeY > window.innerHeight || planeY < 0) {
            gameOver();
        }

        requestAnimationFrame(update);
    }

    // 제어: 클릭 시 상승
    const handleJump = () => {
        if (!gameActive) return;
        velocityY = -4.5;
    };

    window.addEventListener('mousedown', handleJump);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); handleJump(); }, {passive: false});

    function gameOver() {
        gameActive = false;
        alert(`비행 종료! 비행 거리: ${distance}m`);
        location.reload();
    }

    update();
</script>
</body>
</html>